<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@thingco/authentication-core</title><meta name="description" content="Documentation for @thingco/authentication-core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@thingco/authentication-core</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@thingco/authentication-core</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#thingco-shared-frontend-libraries" id="thingco-shared-frontend-libraries" style="color: inherit; text-decoration: none;">
  <h1>ThingCo shared frontend libraries</h1>
</a>

<a href="#overview" id="overview" style="color: inherit; text-decoration: none;">
  <h2>Overview</h2>
</a>
<p>A set of shared libraries for use in frontend React/React Native-based applications</p>

<a href="#requirements" id="requirements" style="color: inherit; text-decoration: none;">
  <h2>Requirements</h2>
</a>
<ul>
<li><strong>Node</strong>. This is a hard requirement. Ideally use latest stable version. Some build scripting put in place for newer work requires ESModule and top-level await support, so Node v15+, ideally.</li>
<li><strong><a href="https://yarnpkg.com/getting-started/install">Yarn</a></strong>. This is a hard requirement. The project uses features only available in Yarn.</li>
</ul>

<a href="#regarding-publication-method--consuming-of-published-packages" id="regarding-publication-method--consuming-of-published-packages" style="color: inherit; text-decoration: none;">
  <h2>Regarding publication method + consuming of published packages</h2>
</a>
<p>The packages are published on GitHub, using GitHub Packages. In this case they are all NPM modules, so they are published to GitHub&#39;s own NPM repo. The packages are also private, and are only accessible to consumers with an access token they have generated -- <em>ie</em> in practice the only people who will be able to install (or publish) are the members of the <code>@thingco</code> organisation on GitHub.</p>
<p>To publish or consume the packages, you will need to generate a Personal Access Token with the correct permissions (<code>packages:read</code> for consumption, <code>packages:read</code> and <code>packages:write</code> and <code>repo</code> for publishing). So</p>
<ol>
<li>Go to GitHub -&gt; click on your profile -&gt; Settings -&gt; Developer Settings -&gt; Generate Personal Access Token.</li>
<li>Set the correct permissions, and call it <code>GITHUB_PACKAGES_READ_WRITE_TOKEN</code>.</li>
<li>Copy the token and store it as an env var on your machine.</li>
<li>Authenticate with Github: run <code>yarn npm login --scope=@thingco --publish</code>. The flags specify <em>a</em> the organisation scope, and <em>b</em> say that you want to use the settings you use to publish packages in that scope (in this case, to GitHub&#39;s NPM registry).</li>
<li>This will ask for your username, followed by a request for a token: this is the PAT that you just created.</li>
<li>You should now be authorised and authenticated.</li>
</ol>
<p>If you are <em>publishing</em>, you can now use <code>yarn npm publish --tolerateRepublish</code> to publish new package versions. Note that the <code>--tolerateRepublish</code> flag just says not to error out if you try to publish a version that already exists: this means we can safely <code>foreach</code> through all packages and publish them <em>en masse</em>; Yarn will try for each one and just carry on to the next one if it can&#39;t publish.</p>
<p>If you are <em>consuming</em>, there should be nothing else to do -- within another existing app (with configs set), you should be able to just <code>yarn add @thingco/some-package</code> or <code>npm install @thingco/some-package</code> without issues. In an app where config has <em>not</em> been set up, you&#39;ll need to add this to the <code>.yarnrc</code> file if it isn&#39;t there:</p>
<pre><code><span class="hl-0">npmScopes</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-0">thingco</span><span class="hl-1">:</span><br/><span class="hl-1">    </span><span class="hl-0">npmAuthToken</span><span class="hl-1">: </span><span class="hl-2">&quot;${GITHUB_PACKAGES_READ_WRITE_TOKEN}&quot;</span><br/><span class="hl-1">    </span><span class="hl-0">npmRegistryServer</span><span class="hl-1">: </span><span class="hl-2">&quot;https://npm.pkg.github.co</span><span class="hl-3">m</span>
</code></pre>
<p>In npm apps, you&#39;ll need to adjust configs in an <code>npmrc</code> file afaik, so consult the GH packages &amp; NPM docs -- I&#39;m not as familiar with this as I am with Yarn workflows.</p>

<a href="#developing" id="developing" style="color: inherit; text-decoration: none;">
  <h2>Developing</h2>
</a>
<p>To do an initial pull down of dependencies, then building packages (some of which are interdependent), then sanity check at end to make sure all set up:</p>
<pre><code><span class="hl-4">yarn</span><span class="hl-1"> </span><span class="hl-4">install</span><br/><span class="hl-4">yarn</span><span class="hl-1"> </span><span class="hl-0">packages</span><span class="hl-1">:</span><span class="hl-4">build</span><span class="hl-1">-</span><span class="hl-4">all</span><br/><span class="hl-4">yarn</span>
</code></pre>
<p>Libraries are in the <code>packages/</code> directory. Each library is aliased in the root <code>package.json</code>, so you can run commands (<code>build</code>, <code>start</code>, <code>test</code> <em>etc</em>) direct from root -- for example <code>yarn package:auth-flows build</code>. Detailed information for each library should be within its README, in theory. </p>
<p>Libraries are published as GitHub packages, available to all members of the ThingCo organisation.</p>
<p>The <code>playground/</code> directory contains the shell of a basic React app -- feel free to adjust that as you want to test out the libraries whilst developing.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-enum"><a href="enums/AuthStateId.html" class="tsd-kind-icon">Auth<wbr/>State<wbr/>Id</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthConfig" class="tsd-kind-icon">Auth<wbr/>Config</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthContext" class="tsd-kind-icon">Auth<wbr/>Context</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthError" class="tsd-kind-icon">Auth<wbr/>Error</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthEvent" class="tsd-kind-icon">Auth<wbr/>Event</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthInterpreter" class="tsd-kind-icon">Auth<wbr/>Interpreter</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthMachine" class="tsd-kind-icon">Auth<wbr/>Machine</a></li><li class="tsd-kind-type-alias"><a href="modules.html#AuthState" class="tsd-kind-icon">Auth<wbr/>State</a></li><li class="tsd-kind-type-alias"><a href="modules.html#DeviceSecurityType" class="tsd-kind-icon">Device<wbr/>Security<wbr/>Type</a></li><li class="tsd-kind-type-alias"><a href="modules.html#InternalAuthContext" class="tsd-kind-icon">Internal<wbr/>Auth<wbr/>Context</a></li><li class="tsd-kind-type-alias"><a href="modules.html#InternalAuthEvent" class="tsd-kind-icon">Internal<wbr/>Auth<wbr/>Event</a></li><li class="tsd-kind-type-alias"><a href="modules.html#LoginFlowType" class="tsd-kind-icon">Login<wbr/>Flow<wbr/>Type</a></li><li class="tsd-kind-type-alias"><a href="modules.html#NewInternalAuthEvent" class="tsd-kind-icon">New<wbr/>Internal<wbr/>Auth<wbr/>Event</a></li><li class="tsd-kind-variable"><a href="modules.html#machine" class="tsd-kind-icon">machine</a></li><li class="tsd-kind-variable"><a href="modules.html#model" class="tsd-kind-icon">model</a></li><li class="tsd-kind-function"><a href="modules.html#createAuthenticationSystem" class="tsd-kind-icon">create<wbr/>Authentication<wbr/>System</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>